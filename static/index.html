<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Universal Video Downloader</title>

<style>
body {
    background: #0d0d0d;
    font-family: sans-serif;
    color: white;
    text-align: center;
    padding: 40px;
}
.container {
    max-width: 420px;
    margin: auto;
}
input, button {
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    margin-top: 10px;
    font-size: 16px;
    border: none;
}
input {
    background: #1b1b1b;
    color: #fff;
}
button {
    background: #0070f3;
    color: #fff;
    font-weight: bold;
}
.card {
    background: #1a1a1a;
    padding: 18px;
    border-radius: 14px;
    text-align: left;
    margin-top: 20px;
}
a {
    color: #4daaff;
}
.thumb {
    width: 100%;
    border-radius: 12px;
    margin-top: 10px;
}
</style>

</head>

<body>
<div class="container">
    <h1>ğŸ¥ Universal Video Downloader</h1>

    <input id="url" placeholder="Ø¶Ø¹ Ø±Ø§Ø¨Ø· YouTube / VK / Ø£ÙŠ Ù…ÙˆÙ‚Ø¹ ÙŠØ¯Ø¹Ù…Ù‡ yt-dlp" />

    <button onclick="process()">Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</button>

    <div id="result"></div>
</div>

<script>
async function process() {
    const url = document.getElementById("url").value.trim();
    if (!url) return alert("Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø£ÙˆÙ„Ø§Ù‹");

    document.getElementById("result").innerHTML = "<p>â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>";

    let endpoint = url.includes("vk.com") ? "/api/vk" : "/api/ytdlp";

    const res = await fetch(`${endpoint}?url=${encodeURIComponent(url)}`);
    const data = await res.json();

    if (data.error) {
        document.getElementById("result").innerHTML = `<p>âŒ ${data.error}</p>`;
        return;
    }

    let html = `<div class='card'><h3>Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…ØªØ§Ø­Ø©:</h3>`;

    // yt-dlp
    if (data.data) {
        if (data.data.thumbnail)
            html += `<img src="${data.data.thumbnail}" class="thumb" />`;

        Object.entries(data.data.formats).forEach(([q, link]) => {
            html += `<p>${q}: <a href="${link}" target="_blank">ØªØ­Ù…ÙŠÙ„</a></p>`;
        });
    }

    // VK
    if (data.links) {
        Object.entries(data.links).forEach(([q, link]) => {
            html += `<p>${q}: <a href="${link}" target="_blank">ØªØ­Ù…ÙŠÙ„</a></p>`;
        });
    }

    html += `</div>`;
    document.getElementById("result").innerHTML = html;
}
</script>

</body>
</html>
