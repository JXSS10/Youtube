<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Universal Video Downloader</title>
<style>
body { background: radial-gradient(circle at top, #0d0d0d, #000); color:white; font-family:sans-serif; text-align:center; padding:40px;}
.container { max-width: 420px; margin:auto;}
input, button { width:100%; padding:14px; margin-top:10px; border-radius:12px; border:none; font-size:16px;}
input { background:#1b1b1b; color:#fff;}
button { background: linear-gradient(90deg,#e0b056,#f5d38f); color:#000; font-weight:bold; cursor:pointer;}
.card { background:#1a1a1a; padding:18px; border-radius:14px; margin-top:20px; text-align:left;}
a { color:#4daaff;}
.thumb { width:100%; border-radius:12px; margin-top:10px;}
</style>
</head>
<body>
<div class="container">
    <h1>ğŸ¥ Universal Video Downloader</h1>
    <input id="url" placeholder="Ø¶Ø¹ Ø±Ø§Ø¨Ø· VK/YouTube/Ø£ÙŠ Ù…Ù†ØµØ© Ù‡Ù†Ø§">
    <button onclick="process()">Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</button>
    <div id="result"></div>
</div>
<script>
async function process() {
    const url = document.getElementById("url").value.trim();
    if(!url) return alert("Ø¶Ø¹ Ø§Ù„Ø±Ø§Ø¨Ø· Ø£ÙˆÙ„Ø§Ù‹");
    document.getElementById("result").innerHTML = "<p>â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...</p>";
    const res = await fetch(`/api/download?url=${encodeURIComponent(url)}`);
    const data = await res.json();
    if(data.error){
        document.getElementById("result").innerHTML = `<p>âŒ ${data.error}</p>`;
        return;
    }
    let html = `<div class='card'><h3>Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„:</h3>`;
    if(data.data.thumbnail) html += `<img src="${data.data.thumbnail}" class="thumb">`;
    Object.entries(data.data.formats).forEach(([q, link])=>{
        html += `<p>${q}: <a href="${link}" target="_blank">ØªØ­Ù…ÙŠÙ„</a></p>`;
    });
    html += `</div>`;
    document.getElementById("result").innerHTML = html;
}
</script>
</body>
</html>
